\section{front end}

%% ###################################################################################################
%%   Unterkapitel                                                                                                                                      
%% ###################################################################################################
\subsection{Grafische Darstellung der aktuellen Wetterdaten}

\subsubsection*{HTML5}
Quelle: https://www.fusioncharts.com/javascript-charts-guide/


1. Cross Browser Compatibility
It is a pain to handle cross-browser compatibility issues, and we believe the library you choose should do it for you.
Examples of libraries that work only on modern browsers: D3.JS, Chart.js and Chartist.js.
Examples of libraries that work in all the browsers: FusionCharts, amCharts and Highcharts.

2. Cross Device Compatibility
but if you want to ensure a consistent experience across hand-held devices as well, the charting library you choose should be responsive.
If you are making an application only for mobile, then you need to consider size of the library as well. This is because of lower processing power and browsing-speed issues in smartphones. A library with lower footprint is highly recommended in this case.

3. Input Data Format
Although JSON (JavaScript Object Notation) is gradually becoming the standard format especially when it comes to charting libraries. Most of the times you will have to load the data from a database like MySQL, Oracle or SQL Server. In this case you need to take into account the format which is acceptable to both your library and other parts of the application.

4. Customizability
This is one of the biggest decision factors for many. Is the charting library flexible enough so that you can make it do what you want, or will it just look good on defaults and you are on your own if you try to customize it?
But with great customizability, comes great complexities. A good example of this is D3.js. It practically allows you to configure every element on the chart, but doing so is effort intensive. Then you have libraries like FusionCharts and Highcharts which strike a perfect balance between these two. Here you get a lot of freedom to customize your charts with minimum effort on your end.

5. Range of Available Charts
This one is a no brainer. Whatever visualization you want to create should be a part of the library. One useful advice here is that you should always consider your future needs as well and not just present ones. 


6. Learning Curve
No doubt D3.js is very powerful, but if you are running on a tight deadline or using a charting library for the first time, it is not recommended to use D3.js.

7. Compatibility With Other Parts of Code OR Compatibility with Web-Frameworks
Imagine you are comfortable using PHP, ASP.NET, AngularJS or jQuery and are not familiar with vanilla JavaScript very much. Wouldn’t it be great if you can build charts using framework specific plugins or wrappers?

Some libraries have free plugins and wrappers that generate the required JavaScript and HTML code for you, which is then used to render charts on a web page.

8. Performance
If you have to plot fewer data points then most of the libraries will perform on a similar scale and you can neglect this factor. On the other hand if you have to render millions of data points, then performance becomes a major deciding factor as each fraction of second saved will have a huge impact in aggregate.

9. Exporting
It will be better that the charting library you choose supports export feature out of the box. Common export formats to look for are JPEG, PNG, PDF and SVG. There are two ways to export charts - client side and server side. Libraries like FusionCharts and Highcharts support both the ways of exporting. Only adding one line of code is enough to get this working. 

10. Design and Interactivity
Design is more than just look and feel of a chart. It should not only look good (themes, color scheme), but it should have meaningful interactivity (hovering, click-through drill downs, live data updates, etc). For example, clicking a legend icon in multi-series line chart should toggle the visibility of related data plot. Custom code should not be required for that. Themes: another important design feature is the ability to theme your charts to match the design language of the rest of your application. A centralized theme manager - one place to manage the theming of your charts - will make your job much easier.


11. Community and Support
So when you face a problem, you might need some external support to solve it. 

12. Accessibility
 does a charting library comply with 508 standards? Are screen readers like JAWS able to read the charts rendered by a library?

 WEbseite: http://accessibility.psu.edu/images/charts/
 jQuery Visualize: https://www.filamentgroup.com/lab/update-to-jquery-visualize-accessible-charts-with-html5-from-designing-with.html

13. Pricing and Licensing Terms
 Terms and pricing varies depending on factors like number of users, type of application (SaaS, intranet, web) and number of servers.

14. Open Source or Commercial
 Open-source is in fashion nowadays, but it’s not the right solution for every need.
 https://www.codeproject.com/Articles/581146/8-reasons-to-choose-commercial-library-instead-of



 D3 is an awesome javascript library, but it has no “ready to ship” charts and graphs.


%% ###################################################################################################
%%   Unterkapitel                                                                                                                                      
%% ###################################################################################################
\subsection{Grafische Darstellung der Wetterdatenverläufe}




\Diskussionspunkt{Samplerate, fixe Y-Achse, Barrierefreiheit}


%% ###################################################################################################
%%   Unterkapitel                                                                                                                                      
%% ###################################################################################################
\subsection{Responsive Design / Mobile First}

Die Idee des Responsive Web Design wurde 2010 von Ethan Marcotte in einem Artikel \footnote{ \url{http://alistapart.com/article/responsive-web-design}} des Magazins A List Apart veröffentlicht. Hintergrund war, dass man nicht für jedes neue Gerät eine eigene Webseite erstellen musste. Marcotte schreibt von drei Faktoren, die ein responsive Design benötigt: Fluid grids, flexible images und media queries.

Fluid grids: Die Anordnung der Elemente passt sich dynamisch der Bildschirmgrösse an.
flexible images: Bilder haben keine feste Grösse sondern nutzen den ihnen zu Verfügung stehenden Platz optimal aus.
Media queries: sind die technische Basis für die beiden oberen Anforderungen. 

Die "Mobile Web Best Practices" des W3C \footnote{ \url{https://www.w3.org/TR/mobile-bp}} empfiehlt, dass sämtliche Informationen, die in der Desktop-Version zur Verfügung stehen, auch von der mobilen Seite aufgerufen werden können (One Web Design).

Mobile First ist ein Designkonzept, bei dem die optimale Darstellung einer Website auf mobilen Endgeräten oberste Priorität hat. Bei Mobile First beginnt der Designer mit dem Mobile-Design und arbeitet sich dann schrittweise zur grösseren Desktop-Version vor. Vorteil: Da bei Mobile First die Grafiken und interaktiven Elemente schon zu Beginn für die Mobilversion optimiert werden, wird automatisch sichergestellt, dass diese auf jeder anderen Screengrösse auch umsetzbar sind.

Mobile First wurde von Luke Wroblewski 2009 das erste Mal vorgeschlagen. Es geht darum sich beim Designen einer Webseite zu erst auf die Kernfunktion zu konzentireren und diese zielgerichtet umzusetzen. Die benötigt eine vertiefte Analyse der Zielgruppe.

Vorgehen:

\begin{itemize}  
\item Ziel der Webseite definieren
\item Zielgruppe definieren
\item Ziel/Erwartungen der Zielgruppe erfassen
\item Wo wird die Infrmation gelesen
\item Was sind die Bedürfnisse der Benutzer
\item Scribbles erstellen
\item Wireframes erstellen
\end{itemize}

\subsubsection*{Ziel der Wetterstation-Webseite}
Interessierten, die wichtigsten Wetterparameter in leicht verständlicher Art zu präsentieren
\subsubsection*{Zielgruppe}
Touristen, Bevölkerung, Sportler, Interessierte
\subsubsection*{Erwartungen der Zielgruppe}
einfach und schnell verständliche Information
\subsubsection*{Scribbles}
Papierzeichnungen als erste Entwürfe
\subsubsection*{Wireframes}
Layout, gezeichnet mit balsamiq, ohne genaue Designangaben.




%% ###################################################################################################
%%   Unterkapitel                                                                                                                                      
%% ###################################################################################################

\subsection{Barrierefreiheit}

Von einer verbesserten Zugänglichkeit profitieren nicht nur Menschen mit Einschränkungen. Es geht darum, die Webseite so zu gestalten, dass sie möglichst für alle Benutzergruppen zugänglich ist. Dazu zählen nicht nur Menschen mit Einschränkungen. Auch veraltete Technik oder aber der allerneueste Stand der Technik können zu Schwierigkeiten führen. Ein hoher Lärmpegel (z.B. in einer Fabrikhalle) oder der Zwang zur Stille (z.B. in einer Bibliothek), der keine akustische Ausgabe gestatten oder Lichtverhältnisse, die einen besonders hohen Kontrast erfordern beeinflussen die Bedienbarkeit einer Webseite. Eine von Microsoft beauftragte Studie~\cite{ForresterResearch2004E:Abilities} der \flqq Forrester Research Inc.\frqq schätzt, dass über 60 Prozent aller Computernutzer von Barrierefreiheit profitieren können und gemäss \flqq Interface Design\frqq ~\cite{ThesmannStephan2016ID:U} wird Barrierefreiheit bald Standard sein.

Die aktuellen Web Content Accessibility Guidelines\footnote{ \url{https://www.w3.org/TR/WCAG20/}} fordern die Einhaltung von vier Designprinzipien:

\begin{itemize}  
\item Prinzip 1: Wahrnehmbarkeit 
\item Prinzip 2: Bedienbarkeit
\item Prinzip 3: Verständlichkeit
\item Prinzip 4: Robustheit
\end{itemize}

Die Ziele dieser vier Prinzipien sind durch zwölf Richtlinien genauer spezifiziert. 

% Zu jeder Richtlinie geben die WCAG2 testbare Erfolgskriterien (Success Criteria) vor.

% Priorität 1 („Muss-Kriterien“): Webauftritte müssen alle A-Anforderungen erfüllen, weil es sonst für eine oder mehrere Benutzergruppen unmöglich wäre, auf die Information im Dokument zuzugreifen.

% Priorität 2 („Soll-Kriterien“): Die Erfüllung der AA-Anforderungen beseitigt signifikante Hindernisse und erleichtert einer oder mehreren Benutzergruppen den Zugriff auf Web-Dokumente.

% Priorität 3 („Kann-Kriterien“): Diese AAA-Anforderungen können erfüllt werden, um den Zugriff auf Web-Dokumente für eine oder mehrere Benutzergruppen zu erleichtern. Sind die Prioritäten 1 bis 3 erfüllt, erhält das Informationsangebot die Konformitätsstufe AAA.


Daraus ergeben sich folgende relevante Anforderungen für die Webseite der Wetterstation:


\subsubsection*{Wahrnehmbarkeit}
% Anforderung 1.1: Text-Alternativen 
% Anforderung 1.2: Zeitbasierte Medien -> nicht relevant
% Anforderung 1.3: Anpassbarkeit
% Anforderung 1.4: Unterscheidbarkeit
Alle Nicht-Text-Inhalte, die dem Benutzer präsentiert werden, haben eine Textalternative, die dem entsprechenden Zweck dient.
Für die Darstellung der Seite muss CSS verwendet werden. Die einzelenen Blöcke müssen sematisch korrekt bezeichnet werden (RL 1.3)
Alle Nicht-Text-Inhalte, die dem Benutzer präsentiert werden, haben eine Textalternative, die dem entsprechenden Zweck dient.
Farbe ist nicht das einzige visuelle Mittel, um Informationen zu vermitteln, eine Handlung anzuzeigen, eine Reaktion auszulösen oder ein visuelles Element zu unterscheiden. ext kann ohne Hilfsmittel bis zu 200 Prozent vergrössert werden, ohne dass der Inhalt oder die Funktionalität verloren geht. Die visuelle Darstellung von Text hat ein Kontrastverhältnis von mindestens 7:1.
Für die visuelle Darstellung von Textblöcken steht ein Mechanismus zur Verfügung, um folgendes zu erreichen: (Level AAA)
Vorder- und Hintergrundfarben können vom Anwender frei gewählt werden.
Die Breite beträgt nicht mehr als 80 Zeichen oder Glyphen (40 bei CJK).
Der Text ist links ausgerichtet
Der Zeilenabstand (Vorspann) ist innerhalb von Absätzen mindestens anderthalb mal so groß wie der Zeilenabstand, und der Absatzabstand ist mindestens 1,5 mal so groß wie der Zeilenabstand.
Die Größe des Textes kann ohne Hilfsmittel bis zu 200 Prozent verändert werden, ohne dass der Benutzer horizontal scrollen muss, um eine Textzeile in einem Vollbildfenster zu lesen.

Interessante Farb-Auswahlwerkzeuge:
Colorchecker\footnote{ \url{http://accessible-colors.com}} 
Colorsave\footnote{ \url{http://colorsafe.co}} 
Colorbrewer\footnote{ \url{http://colorbrewer2.org}} 


Problematisch ist die Kombination von Komplementärfarben, weil sie zu Flimmern führen können.~\cite{HellbuschJanEric2011Bvuu}

\subsubsection*{Bedienbarkeit}
% Anforderung 2.1: Zugänglichkeit per Tastatur
% Anforderung 2.2: Bereitstellung ausreichender Zeit
% Anforderung 2.3: Vermeidung von Anfällen
% Anforderung 2.4: Navigierbarkeit
Alle Funktionen des Inhalts sind über eine Tastaturschnittstelle bedienbar.
Webseiten enthalten nichts, was in einer Sekunde mehr als dreimal blinkt.
Der Zweck eines jeden Links kann aus dem Linktext allein oder aus dem Linktext zusammen mit seinem programmatisch festgelegten Linkkontext bestimmt werden. Es gibt mehr als eine Möglichkeit, eine Webseite innerhalb einer Gruppe von Webseiten zu lokalisieren. Überschriften und Labels beschreiben das Thema oder den Zweck. Jede Tastatur bedienbare Benutzeroberfläche hat eine Betriebsart, bei der die Tastaturfokusanzeige sichtbar ist. Informationen über den Standort des Benutzers innerhalb einer Reihe von Webseiten sind verfügbar. Abschnittsüberschriften dienen der inhaltlichen Gliederung. 



\subsubsection*{Verständlichkeit}
% Anforderung 3.1: Lesbarkeit
% Anforderung 3.2: Vorhersehbarkeit
% Anforderung 3.3: Hilfestellung bei der Eingabe

Die voreingestellte menschliche Sprache jeder Webseite kann programmgesteuert bestimmt werden. Die menschliche Sprache jeder Passage oder Phrase im Inhalt kann programmatisch bestimmt werden, mit Ausnahme von Eigennamen, Fachbegriffen, Wörtern unbestimmter Sprache und Wörtern oder Phrasen, die Teil der Umgangssprache des unmittelbar umgebenden Textes geworden sind. Ein Mechanismus zur Identifizierung der erweiterten Form oder Bedeutung von Abkürzungen steht zur Verfügung.  Wenn eine Komponente den Fokus erhält, löst sie keinen Kontextwechsel aus. Wenn ein Eingabefehler automatisch erkannt wird, wird das fehlerhafte Element identifiziert und der Fehler dem Benutzer in Textform beschrieben. Labels oder Anweisungen werden bereitgestellt, wenn der Inhalt eine Benutzereingabe erfordert.  Wird ein Eingabefehler automatisch erkannt und sind Korrekturvorschläge bekannt, so werden diese dem Anwender zur Verfügung gestellt.  Es steht eine kontextsensitive Hilfe zur Verfügung.



\subsubsection*{Robustheit}
% Anforderung 4.1: Kompatibilität
 In Inhalten, die mit Hilfe von Markup-Sprachen implementiert wurden, haben Elemente vollständige Start- und End-Tags, Elemente werden entsprechend ihrer Spezifikationen verschachtelt, Elemente enthalten keine doppelten Attribute und alle IDs sind eindeutig. 
 
 
 



%% ###################################################################################################
%%   Unterkapitel                                                                                                                                      
%% ###################################################################################################
\subsection{Vergleich Prognose/Ist Windgeschwindigkeit}

Die Messdaten der Wetterstation werden mit zwei Vorhersagediensten verglichen. Dabei wird jeweils die Eintages-Vorschau und die Dreitagesvorschau betrachtet.
Die Vorhersagedaten werden von den Anbietern nur in die Zukunft angezeigt d.h. wie die Vorhersage von gestern war ist nicht mehr ersichtlich. Aus diesem Grund müssen wir die Vorhersagedaten abgreifen und in unsere Datenbank speichern. Die Vorhersagen haben häufig einen Intervall von drei Stunden. Wir erstellen somit ein Skript, welche alle drei Stunden die Daten abfragt und speichert.

Die Darstellung von Vorhersage und Messresultaten erfolgt in einem Graphen, der den heutigen Tag, links davon die letzten 14 Tage und rechts davon die nächsten drei Tage anzeigt. Pro Anbieter und Prognoseart (1Tag bzw. 3 Tage) wird ein eigener Graph erstellt.

Diese Vergleiche werden aus reinem Interesse der IG erstellt und stellen keinen Service der IG dar. Die Wetterstation ist zudem windtechnisch eher an einem ungünstigen Ort platziert (Bucht), sodass die Messwerte nicht für den ganzen See representativ sind.
Aus diesen Gründen wird die Webseite zwar veröffentlicht, aber kein Link dazu auf der Webseite zur Verfügung gestellt.

Für den Prognoseanbieter haben wir uns für Openweathermap und windfinder entschieden. OWM bietet eine kostenlose Web-API. Windfinder ist eines der beliebtesten Seglertools, bietet aber keine API an. Dies Daten müssen somit aus der Windfinder-Webseite extrahiert werden.

Für die Darstellung der aktuellen Windgeschwindigkeit verwenden wir den Mittelwert der drei Werte aus der Stundenwert-Datenbank.

Openweathermap schein sehr ungenaue Windvorhersagen zu liefern.

-> Bild mit Vergleich von Messwerten, Vorhersage Windfinder und Vorhersage Openweathermap


%% ###################################################################################################
%%   Unterkapitel                                                                                                                                      
%% ###################################################################################################

\subsection{Historische Daten}
Die historische Daten sollen möglichst interaktiv gestaltet sein und ein aussagekräftiges Bild des Wetterverhaltens aufzeigen. Die historischen Daten liegen als Stundenwerte in der Datebank vor.
Tableau Public \footnote{ \url{https://public.tableau.com/de-de/s/}} ist ein Visualisierungsprogramm, das die Möglichkeit bietet direkt auf die Datenbank zuzugreifen. Die Visualisierungen sind einfach zu erstellen und interaktiv vom Benutzer filterbar.
Tableu Public ist kostenlos mit der Einschränkung, dass sämtliche Visualisierungen öffentlich sind. In unserem Fall ist dies kein Problem, da wir die Visualisierungen sowieso veröffentlichen. Um Visualisierungen veröffentlichen zu können ist ein Account nötig. Die Visualisierung kann anschliessend in die eigene Webseite eingebettet werden.

Für die Auswertung haben wir uns auf die Lufttemperatur, die Windrichtung und -geschwindigkeit sowie den Regen konzentriert.
Der Vorteil von Tableau ist, dass die Visualisierungen sehr einfach angepasst werden können wenn z.B. neue Messdaten hinzukommen. Tableau bietet auch die Möglichkeit Darstellungen für verschiedene Display-Grössen anzulegen. Da der Benutzer selbst keine Eingaben machen kann, sondern nur Filter setzen, ist die Gefahr von SQL-Injektion nicht vorhanden.






%% ###################################################################################################
%%   Unterkapitel                                                                                                                                      
%% ###################################################################################################

\subsection{Anzeige Sturmwarndienst}

Meteoschweiz leitet die Sturmwarnung an die Kantonspolizei Thurgau weiter. Diese schaltet die Sturmwarnung über eine eigne Software ein. Auf der Webseite \footnote{ \url{http://www.kttg.ch/kapo/htm/stwarn.shtml}} wir der Status der Sturmwarnung wiedergegeben.

Meteoschweiz stellt die Informationen auch als Dienstleistung zur Verfügung. Diese kostet aber 1300CHF/Jahr (siehe Offerte im Anhang). Um trotzdem an die Daten zu gelangen muss die kttg-Webseite ausgelesen werden.
Dies geschieht über eine Python-Bibliothek namens "Beautiful Soup". Der Status der drei Teilabschnitte wird dann mintütlich in die Datenbank geschrieben. So kann der aktuelle Stand normal über die API abgefragt werden.

Das Problem ist immer noch, dass der Sturmwarndienst nur am Tag aktiv ist. Dies liegt aber nicht an der Kapo. Schon die Updatefiles von Meteoschweiz werden nur während des Tages aktualisiert. Da die Sturmwarnung auf dem Bodensee gesetzlche Pflichten mit sich bringt, haben wir uns entschlossen nur die offiziellen Daten anzuzeigen und nicht anderweitige Sturmwarnungen. Meteoschweiz bietet zudem auf ihrer Mobileapp die Möglichkeit von Push-Nachrichten bei Windwarnungen.

DAs JSON von Meteoschweiz kann leider nicht verwendet werden, da dessen URL bei jedem Update wechselt. Der genaue Pfad lässt sich nicht vorhersagen. Auf Grund des Zeitstempels lässt sich erahnen, dass es keine automatische Verbindung zwischen Meteoschweiz und den Sturmwarnleuchten am Bodensee gibt. Auf der Meteoschweiz-Seite ist z.B. der Zeitstempel 12:00 und auf der kttg.ch Seite 12:07. Wahrscheinlich erfolgt die Aktivierung manuell. Dies würde die Zeitdifferenz erklären.

-> Foto Zeitstempel Meteoschweiz und kttg.ch






Problem ÖFFNUNGSZEITEN!

-> Verweis auf Zeitungsartikel
-> Meteoschweiz schickt in der Nacht keine SMS????? bzw. erstellt keine JSON????


Art. 6.13: Fahrt bei unsichtigem Wetter, Starkwind und Sturm
Bereits bei Starkwind- und Sturmwarnung (Anlage B Buchstabe H.1 und H.2) muss der Schiffsführer die durch die Umstände gebotenen Massnahmen treffen
(BSO Artikel 1.03 und 1.04).


H.1 Starkwindwarnung

Aufleuchten von orangefarbigen Blinklichtern mit ca. 40 orangefarbigen Blitzen pro Minute an den Sturmwarnleuchten.

Starkwindwarnungen weisen auf starke Windböen zwischen 25 Knoten und 33 Knoten hin (ab Beaufort 6).

H.2 Sturmwarnung

Aufleuchten von orangefarbigen Blinklichtern mit ca. 90 orangefarbigen Blitzen pro Minute an den Sturmwarnleuchten.

Sturmwarnungen kündigen das Auftreten von Windböen von 34 Knoten und mehr an (Beaufort 8 und grösser).


4 Bereits bei Starkwind- und Sturmwarnung (Anlage B Buchstaben H.1 und H.2) muss der Schiffsführer die durch die Umstände gebotenen Massnahmen treffen (Artikel 1.03 und 1.04).4

Eingefügt durch den Beschluss der Internationalen Schifffahrtskommission vom 27. Juni 2001, genehmigt vom BR am 21. Nov. 2001, in Kraft seit 1. Jan. 2002 (AS 2002 284 283).

\footnote{ \url{https://www.admin.ch/opc/de/classified-compilation/19760005/index.html}}


Anlage: 
\footnote{ \url{https://www.admin.ch/opc/de/classified-compilation/19760005/index.html}}



