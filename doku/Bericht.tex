\documentclass[a4paper,ngerman, 11pt, pagesize]{report}

%% Päambel
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{babel}
\usepackage{cite}
\usepackage{xcolor}
\newcommand\Diskussionspunkt[1]{\textcolor{red}{#1}}

\usepackage{url}
\usepackage{hyperref}

% Grafikpaket laden
\usepackage{graphicx}

% Tabellen
\usepackage{booktabs}
\usepackage{longtable}

% pdf einbinden (A3)
\usepackage{nextpage}
\usepackage{afterpage}
\usepackage{pdfpages}
\usepackage{typearea}
\usepackage{pdfpages}

% Quelltext
\usepackage{listings}
 \usepackage{color}
 
 \definecolor{middlegray}{rgb}{0.5,0.5,0.5}
 \definecolor{lightgray}{rgb}{0.8,0.8,0.8}
 \definecolor{orange}{rgb}{0.8,0.3,0.3}
 \definecolor{yac}{rgb}{0.6,0.6,0.1}
 
  \lstset{
   basicstyle=\scriptsize\ttfamily,
   keywordstyle=\bfseries\ttfamily\color{orange},
   stringstyle=\color{green}\ttfamily,
   commentstyle=\color{middlegray}\ttfamily,
   emph={square}, 
   emphstyle=\color{blue}\texttt,
   emph={[2]root,base},
   emphstyle={[2]\color{yac}\texttt},
   showstringspaces=false,
   flexiblecolumns=false,
   tabsize=2,
   numbers=left,
   numberstyle=\tiny,
   numberblanklines=false,
   stepnumber=1,
   numbersep=10pt,
   xleftmargin=15pt
 }


%%  Variablen
\newcommand{\authorName}{Ladina Bilgery \and Thomas Wieling}
\newcommand{\auftraggeber}{Interessengemeinschaft Wetterstation Arbon}
\newcommand{\auftragnehmer}{Interstaatliche Hochschule für Technik NTB}
\newcommand{\projektName}{User Interface und Datenmanagement für die Wetterstation Arbon}
\title{\projektName~(Fachmodul)}
\author{\authorName}
\date{\today}

%%  Create a shorter version for tables. DO NOT CHANGE 
\newcommand\addrow[2]{#1 &#2\\ }
\newcommand\addheading[2]{#1 &#2\\ \hline}
\newcommand\tabularhead{\begin{tabular}{lp{13cm}}
\hline
}
\newcommand\addmulrow[2]{ \begin{minipage}[t][][t]{2.5cm}#1\end{minipage}
   &\begin{minipage}[t][][t]{8cm}
    \begin{enumerate} #2   \end{enumerate}
    \end{minipage}\\ }
\newenvironment{usecase}{\tabularhead}
{\hline\end{tabular}}



%%  Beginn Dokument
\begin{document}
\pagenumbering{roman}
\input{Deckblatt}
\setcounter{page}{2}
\tableofcontents          
\clearpage
\pagenumbering{arabic}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Einführung
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Einführung}

\Diskussionspunkt{Ziel des Fachmoduls, Aufträge, Vorgehensweise, Vorstellung Wetterstation Arbon}
\Diskussionspunkt{Foto Wetterstation}


\Diskussionspunkt{Beispiel für eine Bildintegration inkl. Referenz darauf:}
\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.9\linewidth]{img/grafik}
	\caption{eine Grafik ohne Sinn und Verstand}
	\label{img:grafik-dummy}
\end{figure}

Weiterhin wollen wir an dieser Stelle Bezug auf die Grafik
\ref{img:grafik-dummy} auf Seite \pageref{img:grafik-dummy} nehmen, was uns
hiermit gelungen sein dürfte. Latex passt die Seitenzahl aber auch die Nummer
der Grafik automatisch an, wir müssen uns um nichts kümmern.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Hauptteil
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Hauptteil}

\section{IST-Zustand}
\Diskussionspunkt{Hardware und Software, Skizze, Übersicht, Verbindungen/Verknüpfungen untereinander}
\Diskussionspunkt{Bild}

\subsection{Installierte Komponenten}

Die Wetterstation Arbon besteht aus folgenden Sensoren bzw. Sensor-Einheiten:
\begin{itemize}  
\item Webcam
\item Kombi-Wetter-Transmitter
\item Wassertemperatur-Sensor
\item Pegel-Sensor (defekt)
\end{itemize}


Die Webcam ist 360 Grad drehbar, schwenkbar, verfügt über eine Zoomfunktion und kann ferngesteuert werden.  Der Kombi-Wetter-Transmitter vereint mehrere Sensoren in einem Gehäuse. Dies sind Windgeschwindigkeit und -richtung, Lufttemperatur, relative und absolute Luftfeuchtigkeit, Regenmenge und Luftdruck. Der Wassertemperatur-Sensor besteht aus mehreren PT100-Widerständen, die in einem Kunststoffrohr im Abstand von 20cm montiert sind. Bei den Temperaturwiderständen ist einer defekt. Der Wert dieses Sensors wird mit Hilfe der beiden Nachbar-Wiederständen interpoliert. Den defekten Temperaturwiderstand zu ersetzen ist zu aufwändig. Der Pegelsensor ist im gleichen Kunststoffrohr verbaut wie die Temperatur-Widerstände und misst den hydrostatischen Druck. Das Kunststoffrohr ist gegen den Seegrund hin offen und nach oben verschlossen.

Die Wetterstation ist auf einem Pfahl ausserhalb des Hafens Arbon montiert. Auf dem Pfahl befindet sich ein kleiner Schaltschrank, jedoch keine Auswertelogik. Sämtliche Daten werden in IP-Pakete verpackt und über eine Glasfaser-Leitung an den Server gesendet.

Die verbauten Komponenten sind in der Grafik \ref{img:HW-Aufbau} schematisch dargestellt.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=1\linewidth]{img/HW-Aufbau}
	\caption{Hardware-Aufbau der Wetterstation Arbon}
	\label{img:HW-Aufbau}
\end{figure}

  
\section{Die Webseite}
Die Webseite der Wetterstation ist mit dem CMS Openfile64Light der Firma Screenbox erstellt. Der Nachteil am CMS ist, dass auf der Seite selber keine eigenen HTML, CSS oder Javascript Dateien erlaubt. Eigene Änderungen oder dynamische Inhalte, werden in openfile64Light als sogenannte Applikationen behandelt. Um eigene Inhalte zu erstellen muss für die gewünschte Applikation eine PHP Referenzdatei erstellt werden, \Diskussionspunkt{welche auf die HTML, Javascript und CSS Dateien in einem eigenen Ordner verweisen,diese muss im Ordner application abgelegt werden und in der Datenbank in der Tabelle applications gespeichert werden. Zusätzlich muss die Applikation über Screenbox erstellt werden. Diese erstellen dort die Applikation in der Datenbank und vergeben auch die Namen, damit diese auf der Webseite ausgewählt werden kann. Die geschieht gegen einen Unkosten Beitrag von 75 Schweizer Franken.} \\


\begin{figure}[htbp]
	\centering
	\includegraphics[width=1\linewidth]{img/Sequenzdiagramm_Wetter}
	\caption{Sequenzdiagramm Ablauf von der Datenerfassung bis zur Anzeige}
	\label{img:Sequenzdiagramm}
\end{figure}


Für die Anzeige der von Weather-Display ausgewerteten Daten läuft wird Weather-Display Live. Das Weather-Display live funktioniert mit Flash, dies wird jedoch, aus folgendem Grund, nicht mehr von allen Geräten unterstützt, war jedoch zu beginn des Internetzeitalters essentiell für dynamische Webseiten. Mit ihm konnten einfach dynamische Inhalte erstellt und administriert werden. Jedoch gab es immer wieder gravierende Sicherheitslücken und Weiterentwicklungen im Bereich Web. Mit dem aufkommen der Smartphones wurde Flash immer weiter verdrängt durch HTML5 und Javascript. Nicht zuletzt auch durch ein Kommuniqué von Steve Jobs. In diesem erklärt er warum seine Firma (Apple) nicht auf Flash, sondern HTML5 und Javascript setzt. Einer der Gründe für dieser Entscheidung ist, dass Flash keine open-source Software ist. D.h Adobe kontrolliert das System. Hierbei erwähnt Steve Jobs auch das Apple ein closed-source system ist, sie jedoch an einen offenen Webstandard glauben. Der zweite Grund ist warum Apple sich nicht für Flash entschieden hat ist, dass die Videos bzw. Games seit diesem offenen Brief aus dem Jahr 2009 auch in den neuen Standards, H.264, erhältlich ist. Der dritte Grund, das Apple nicht auf Flash gesetzt hat ist die Sicherheit. Aus Untersuchungen im Jahr 2009 ging hervor, dass die ihre Macs abstürzen. Dies kommt durch die Flashsoftware von Adobe. Dazu kommt, dass Flash auf den mobilen Geräten von Apple nicht sicher lief. Mehrmals wurde Adobe gefragt um eine laufende Version zu erstellen, dies hat Adobe jedoch nicht geschafft. Aus diesen Gründen hat Apple, welcher einer der Vorreiter von Smartphones war, sich entschieden um Flash nicht zu benutzen. Dadurch haben auch andere Hersteller von mobilen Geräten nachgezogen und auf Flash möglichst verzichtet. \cite{Apple:ThoughtsOnFlash} \\
Der wichtigste Grund ist das Adobe ab 2020 Flash nicht mehr weiterentwickelt und keine Updates mehr herausgeben wird. Dies aufgrund der oben genannten Tatsachen und das zur heutigen Zeit vielmals Flash umgangen wird und andere Lösungen gebraucht werden. Aufgrund von dies wird ab 2020 auch kein Browser mehr das Plugin zulassen und Seiten welche Flashinhalte benutzen sind nicht mehr Vollständig verfügbar. Somit ist auch die Wetter-Arbon Seite von dieser Tatsache betroffen. \cite{Adobe:FlashTheFutureofInteractiveContent}\\
Um trotzdem erreichbar, auf Endgeräte ohne Flash, zu sein wird in der Wassersport.php bzw. Touristik.php Datei der Entscheid gefällt ob die Flash-Seite oder die Bild-Seite geöffnet wird, im Code des Wassersport.php-File oder im Touristik.php-File, je nachdem welche Seite geöffnet wird gefällt. Dies wird mit folgendem Code entschieden: 

\begin{lstlisting}
if (swfobject.hasFlashPlayerVersion("1")) {
document.write('
<iframe 
src="https://www.wetter-arbon.ch/WDL/index.html">
</iframe>');
} 
else {
document.write('
<img class="pageImage" 
src="https://www.wetter-arbon.ch/WDL/WDL.png" alt="Bodensee West" 
/>');
}
\end{lstlisting}

Der Nachteil an der Bild-Seite ist jedoch, dass die Anzeigen nicht mehr dynamisch sind. So wird z.B. die Änderung der Windrichtung nicht angepasst und muss stetig von Hand aktualisiert werden, will man den aktuellen Wert sehen.\\

Zusätzlich zur Desktop-Seite, auf welcher alle Informationen verfügbar sind, gibt es eine mobile abgespeckte Version der Wetterstation, siehe \ref{img:mobilewebseite} auf Seite \pageref{img:mobilewebseite}, diese ist erreichbar unter m.wetter-arbon.ch. Auf dieser werden die zwei aktuellsten Bilder der Touristikseite, bzw. der Wassersportseite auf einer Seite dargestellt. Zusätzlich gibt es einen Link welche die Bilder der Webcam, sowie deren Steuerungseinheit darstellt.
\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.9\linewidth]{img/mobile_webseite}
	\caption{Datenanzeige m.wetter-arbon.ch}
	\label{img:mobilewebseite}
\end{figure}

Daraus kann man konkludieren, dass die Aplikationen Wetter Touristik bzw. Wassersport auf einem alten Stand der Technik sind. Das Problem hierbei ist, dass viele Geräte Flash nicht mehr oder in naher Zukunft nicht mehr unterstützen. Zusätzlich ist die Lösung mit dem Screenshot der aktuellen Verhältnisse auch keine optimale Lösung. Auch sind die Schreibfehler, welche entdeckt wurden bei näherer Betrachtung auch nicht Vorteilhaft. Weiter ist die Wetterapplikation nicht nach dem Prinzip responsive Design aufgebaut, welches in der heutigen Zeit ein wichtiger Bestandteil einer Webseite ist. Zusätzlich zum Flash, von der gebrauch gemacht wird sind die Anzeigen auf der Touristik bzw. Wassersport Seite unübersichtlich. Die Graphen, bspw. der Windanzeige mit ihrer Richtung sowie die Stärke, sind schwer lesbar, da die Skalierung des Graphen automatisch die, je nach Windstärke, wechselt. Ein weiteres Problem bei den beiden Webseiten ist die Einstellung der Einheiten. Person A möchte den Wind in m/s Person B in Knoten. Die Auswahl der Einheiten ist momentan zwar möglich, muss aber bei jedem Besuch der Webseite neu ausgewählt werden.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.9\linewidth]{img/grafik}
	\caption{Datenanzeige wetter-arbon.ch}
	\label{img:grafik-dummy}
\end{figure}

Um die Webseite auf den neusten Stand der Technik zu bringen sollten folgende Änderungen durchgeführt werden.Die Flash-Software wird ausgemustert und die Applikation wird auf HTML5 und Javascript umgestellt. Die Webseite soll zudem im responsive Design entwickelt werden, damit auch auf mobilen Geräten die aktuelle Wetterlage sichtbar ist. Die dynamischen, sowie auch die teilweise statischen Anzeigen, werden wo möglich mithilfe der Javascript Bibliothek D3.js oder Google Charts erstellt, hiermit lassen sich ansehnliche und moderne Grafiken erstellen. Die Grafiken, sollten so gestaltet sein das auch Sehbehinderte Personen erkennen wie das Wetter momentan ist. Das heisst beispielsweise, dass die Farben auch für Farbenblinde unterscheidbar sein sollten oder blinde Personen anhand eines Vorleseprogramms erkennen wie das Wetter ist. Ein weiterer Punkt ist die Auswahl der Einheiten, diese sollen nach dem ersten Besuch gespeichert bleiben beim Client mithilfe von Webstorage. 

\subsection{Sturmwarnung}\Diskussionspunkt{zu webseite hinzu oder einzelnes Kapitel zusammen mit notification?}

Die Seite mir der Sturmwarnung, siehe \ref{img:Sturmwarnung} auf Seite \pageref{img:Sturmwarnung} gibt es im eigentlichen nicht mehr, dies wurde beginn November umgestellt aus Sicherheitsgründen, welche in der Problemanalyse erläutert werden. Zum jetzigen Zeitpunkt wird nur noch ein Link zur Verfügung gestellt um auf die kantonale Sturmwarnseite zu kommen. Die Daten dieser Seite werden mit dem deutschen Wetterdienst in Stuttgart sowie Meteo Schweiz erstellt und dienen auf der Webseite nur als Information. Es sollte vor Ort beachtet werden ob die Warnlampen eingeschalten sind. Zu beachten ist hierbei, dass die Sturmwarnungen Bürozeiten haben. D.h. konkret vom 1. April bis 31 Oktober zwischen 6 und 22 Uhr und vom 1. November bis 31. März zwischen 7 und 20 Uhr. Der deutsche Wetterdienst und Meteo Schweiz unterscheiden zwei verschiedene Kategorien. Zum einen starke Windböen zwischen 25 und 33 Knoten, dies wird 40 Blitze pro Minute an den Leuchten signalisiert. Zum anderen Sturmböen von 34 und mehr Knoten, welche mit 90 Blitze pro Minute signalisiert werden. Zusätzlich zu den beiden Kategorien wird der Bodensee in 3 verschiedene Zonen unterteilt, West, Mitte und Ost, wobei Arbon in zur Zone Ost gehört. 
\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.9\linewidth]{img/sturmwarnung}
	\caption{Sturmwarnung vom Kanton Thurgau}
	\label{img:Sturmwarnung}
\end{figure}


\section{Die Datenbank}
Für die Webseite und die Wetterstation, hat es vier verschiedene Datenbanken. Diese werden in diesem Kapitel einzeln behandelt und erklärt wie Sie zusammenhängen bzw. welche Rolle sie für die Webseite spielen. Die vier Datenbanken heissen:
\begin{itemize}  
\item igwetter meteotmpl
\item igwetter wettertest
\item gwetter wp0
\item gwetter openfile64Light
\end{itemize}

Die Datenbank igwetter meteotmpl beinhaltet alle relevanten Datenpunkte, d.h. von der Temperatur bis zur Windrichtung. In dieser Datenbank sind jedoch keine Daten vorhanden und dient momentan nur als Template.\\
Die zweite Datenbank welche nicht aktiv ist, heisst igwetter wp0, diese wurde für eine kurze Zeit für eine Wordpress-Seite benutzt.\\
Die dritte Datenbank ist die igwetter wettertest. Diese ist im Gegensatz zu den vorherigen beiden Datenbanken im Gebrauch. In der Tabelle wx data sind die Daten ab dem 25.02.2015 bis zum jetzigen Zeitpunkt gespeichert. Daten zwischen dem 14.07.2012 und 25.02.2015 sind nicht in der Datenbank hinterlegt. Vor diesem Zeitpunkt bis zum 25.02.2005 sind die täglichen Minimum, sowie Maximum Daten in der Tabelle tblgestern gespeichert.\\
Anders als bei den vorherigen Datenbanken hat die igwetter opfile64Light Datenbank eine Funktion für die Webseite. In diesem Fall ist die ganze Webseite abhängig von dieser, denn das CMS basiert auf einer Datenbank. Dies wurde im Kapitel Wie und wo werden Applikationen erstellt bereits erläutert. Für die BA, sowie das Fachmodul ist nur die Tabelle applications interessant, denn dort werden die Applikationen unter einem bestimmten Namen abgespeichert und aufgerufen. Die Webseite weiss dann welche Datei sie öffnen muss, damit die Applikation läuft.\\
\Diskussionspunkt{Datenbankabbildung, besprechen}\\

Die Daten, welche von der Wetterstation an einen Server in der Uni Liechstein gesendet werden, werden über die Software Weather-Display direkt in die Datenbank ig wettertest Tabelle wxdata geschrieben. Diese Daten werden hier im Minutentakt eingelesen und in der tabelle wx data gespeichert. Die Weahter-Display Software speichert zusätzlich alle Daten, welche von der Wetterstation sind, in ein .txt File. Das Weather-Display live nimmt die Daten anschliessend direkt aus diesem File um die Anzeigen zu erstellen. Die Daten werden in 4 verschiedenen Textfiles mit unterschiedlichen Funktionen gespeichert.
\begin{itemize}  
\item clientraw.txt
\item clientrawextra.txt
\item clientrawhour.txt
\item clientrawdaily.txt
\end{itemize}

Die clientraw.txt Datei enthält die aktuellen Wetterdaten der Station. Der Intervall der Aktualisierung dieser Datei wird in der Datei wdlconfig.xml eingestellt. Im Fall von Arbon wird die Datei alle 5 Sekunden aktualisiert.  Hier werden auch die restlichen Parameter bzw. Einheiten in der die Daten gespeichert werden sollen eingestellt. Die clientrawextra.txt enthält die historischen Extremwerte. Die Datei clientrawhour.txt enthält die aufgezeichneten Daten der letzten Stunde im Minutentakt.\cite{WeatherDisplay} \\
Das Problem hierbei ist folgendes schaut man die Datenbanken zum jetzigen Zeitpunkt an, scheint es chaotisch zu sein. Im Grunde werden nur die igwetter openfile64Light und die igwetter wettertest Datenbank benutzt. Da es mehrere Datenbanken gibt,  ist es auf dem ersten Blick nicht sichtbar, was wo gemacht wird und welche Datenbank für wofür zuständig ist. Des weiteren wird nicht nur eine Datenbank sondern auch .txt Files benutzt um ein Backup zu erstellen, sowie die aktuellen Daten zu speichern. Die historischen Daten in der Datenbank sind nicht vollständig, zum einen gibt es für den gesagten Zeitraum zwischen 2012 und 2015 keine Daten und zum anderen werden die seit dem erstellten Daten nicht auch in die "historische", tblgestern, Tabelle abgelegt. \\
In der Bachelorarbeit soll dieses Problem folgendermassen gelöst werden. Bei der Datenbank sollte den Mitglieder der IG-Wetter Arbon auf dem ersten Blick klar sein, was wofür benutzt wird. Hierfür wird vorgeschlagen die Datenbank igwetter openfile64Light so zu belassen, da diese für das CMS zuständig ist. Es wird eine neue Datenbank erstellt welche klarer strukturiert wird, hierbei sollten neue Tabellen entstehenen, wobei Daten gelöscht werden können um unnötigen Speicherplatz nicht zu belasten. Die "Haupttabelle" soll alle aktuelle Daten enthalten. Zusätzlich soll Tabelle erstellt werden mit zukünftigen und vorhandenen historischen Daten. Um die übersichtlichkeit zu gewähren wird eine Tabelle mit Maximal sowie Minimal Daten erstellt. Die Zeitabstände, in der die Daten gelöscht bzw. zu historischen Daten werden, müssen noch mit den Mitgliedern der IG-Wetter abgesprochen werden. Ein weiterer Punkt auf der Liste sollten die zukünftigen Backups sein, d.h. diese sollten nicht als .txt sonder auch als .sql File gespeichert sein damit im Falle eines Datenverlustes die Datenbank einfach wiederherzustellen ist.



\Diskussionspunkt{\subsection{Daten vom 14.7.2012 bis 25.02.2015}
Die Wetterstation in Arbon musste im Jahr 2012 vom Netz genommen werden, weil sich die technischen Probleme überhäuften. Nachdem sich immer mehr Interessenten meldeten, dass die Wetterstation wieder aufgebaut werden muss, hat man 2015 die Arbeiten wieder aufgenommen um diverse Modernisierungen vorzunehmen. Dies ist der Grund warum es zwischen 2012 und 2015 keine Daten der Wetterstation gibt. ~\cite{Felix:ErweiterteHorizonte}}






\subsection{Webcam}
Zur Wetterstation Arbon gehört auch eine Webcam der Marke Axis. Diese ist auch wieder über ein Applikationsplugin in die Webseite integriert. Auf dieser können per schort links sechs verschiedene Positionen angefahren werden:
\begin{itemize}  
\item Home
\item See Nord
\item Schloss
\item Hafeneinfahrt
\item Horn
\item Seerettung
\end{itemize}
 In der Betriebseigenen Software lassen sich viele Parameter ändern bzw. Beschränken. Sowie die Vergrösserung. Diese ist jedoch aus  Datenschutzgründen die 4-fache Vergrösserung limitiert, möglich wäre eine 216-fache Vergrösserung. Neben den voreingestellten Positionen, kann die Kamera auch frei Positioniert werden. Dies freie Positionierung erfolgt über Pfeile, sowie die Plus und Minus am Bildrand, jenachdem welcher Button geklickt wird, sendet die Webseite das Kommando an die Webcam. Dies geschieht mittels Javascript, wie man dem folgenden Code entnehmen kann.
 
\begin{lstlisting}
 <div class="container webcam" id="webcam_585">
	<div class="up"></div>
	<div class="left"></div>
	<div class="right"></div>
	<img class="pageImage" src="https://webcam.wetter-arbon.ch/mjpg/video.mjpg" alt="" />
	<div class="down"></div>
	<div class="zoomOut"></div>
	<div class="zoomIn"></div>
	<span class="home">Home</span>
	<span class="SeeNord">See Nord</span>
	<span class="Schloss">Schloss</span>
	<span class="Hafeneinfahrt">Hafeneinfahrt</span>
	<span class="Horn">Horn</span>
	<span class="Seerettung">Seerettung</span>
</div>
<script type="text/javascript">
	function changeWebCam(command) {
		var urlAddition;
		
		switch (command) {
			case 'up':
			case 'down':
			case 'left':
			case 'right':
			case 'home':
				urlAddition = 'move=' + command;
				break;
				
			case 'zoomIn':
				urlAddition = 'rzoom=2500';
				break;
				
			case 'zoomOut':
				urlAddition = 'rzoom=-2500';
				break;
				
			case 'SeeNord':
			case 'Schloss':
			case 'Hafeneinfahrt':
			case 'Horn':
			case 'Seerettung':
				urlAddition = 'gotoserverpresetname=' + command;
				break;
				
		}
		
		console.log('changeWebCam');
		$.get('https://webcam.wetter-arbon.ch/axis-cgi/com/ptz.cgi?camera=1&' + urlAddition);
	}
\end{lstlisting}

\section{Problemanalyse}
\Diskussionspunkt{Beschreibung, 
Begründung, 
Erkenntnisse aus IST-Analyse}

\subsection{Hardware}
Sowohl die Webcam, als auch der Kombi-Wetter-Transmitter funktionieren einwandfrei. Der defekte Temperaturwiderstand wird akzeptiert, da dessen Wert interpoliert werden kann. Der Pegel-Sensor hingegen ist defekt und muss ersetzt werden. Der bisherige Sensor nutzte das Prinzip der hydrostatischen Druckmessung. Für die Pegelmessung konnten wir drei verschiedene Messprinzipien eruiert, die eingesetzt werden können:

\begin{itemize}  
\item Hydrostatische Druckmessung
\item Ultraschall-Distanzmessung
\item Radar-Distanzmessung
\item Time-of-light-Distanzmessung
\end{itemize}



\subsection{Webcam}
Die Limitierung des Zooms der Webcam sollte möglichst dynamisch sein. Im jetzigen Zustand ist es nur möglich überall den gleichen Zoomfaktor zu benutzen, obwohl dies nicht notwendig wäre. Beispielsweise könnte der Zoomfaktor auf den See hinaus um einiges grösser sein als auf die umliegenden Häuser.

\subsection{Sturmwarnung}
Wie schon erklärt ist das Problem hierbei der HTTP Standard, viele der Webbrowser stellen die Unterstützung dieses Standards langsam aber sicher ein und werden dann nur noch HTTPS unterstützen\cite{Mozilla:DeprecatingNon-SecureHTTP}. Deswegen ist die Sturmwarnung nur über einen Link aufrufbar. Des Weiteren wurde öfters der Wunsch nach einer SMS-Benachrichtigung geäussert, dies ist momentan nicht realisiert und soll auch teil unserer BA sein. 

\section{SOLL-Zustand}
\Diskussionspunkt{Lösungsansätze = zu entwickelnde Artefakte, 
Resultat aus Literaturrecherche, 
Konzepte}


\subsection{Sturmwarnung}
Die Sturmwarnung soll wieder auf der Webseite sichtbar sein und der Besucher der Webseite soll die Möglichkeit haben sich für eine SMS-Benachrichtigung zu registrieren. Hierbei soll auch die Möglichkeit gegeben werden um selber einen Sollwert der Windstärke einzustellen um ab dieser Stärke eine Benachrichtigung zu bekommen. Für die Benachrichtigung gibt es verschiedenen Möglichkeiten. Eine der Möglichkeiten ist ein Dienst namens clickatell, ein weiterer wäre ein Dienst von Swisscom. Des weiteren gibt es eine API um 

\subsection{Webcam}
Der Zoom soll auf gewissen Positionen, vor allem auf den See hinaus in vollem Umfang benutzt werden können. Die Position der Kamera kann mit einer einfachen HTTP GET anfrage aufgerufen werden. Mit der Position der Kamera weiss man in welche Richtung die Kamera steht. D.h. so kann mittels Javascript der Zoom in Richtung Arbon beschränkt werden und auf den See hinaus kann diese Beschränkung aufgehoben werden.


\subsection{Notifications}
Für die Notification wurden 3 verschiedene Möglichkeiten ausgewählt und mit der Nutzweranalyse ausgewertet. Ziel bei allen Möglichkeiten ist es, dass der Benutzer die Möglichkeit hat sich zu registrieren und Alarmkriterien zu bestimmen. Werden die gewählten Alarmkriterien erreicht bzw. wird eine Sturmwarnung herausgegeben, wird der Benutzer benachrichtigt. Hiermit soll die Möglichkeit gegeben werden, dass der Benutzer in Echtzeit informiert wird und somit keine Warnung oder sein "perfektes" Segelwetter verpasst.  

\begin{center}
\begin{tabular}{ |p{3.5cm}||p{1cm}|p{2cm}|p{3.5cm}|p{2.5cm}|p{1.5cm}|}
 \hline
 \multicolumn{6}{|c|}{Nutzwertanalyse} \\
 \hline
	Möglichkeiten & Kosten & Einfachheit & Programmieraufwand & Anpassbarkeit & Support\\
 \hline
	SMS & 1 & 4 & 3 & 3 & 5 \\
	E-Mail & 5 & 4 & 5 & 5 & 1 \\
	FacebookMessenger & 5 & 4 & 3 & 4 & 1 \\
 
\hline
\end{tabular}
\end{center}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Spezifikation
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{Spezifikation}   


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Projektmanagement
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Projektmanagement}
Wir wollen das Projektmanagement schlank halten um möglichst viel Zeit in die Entwicklung der Artefakte stecken zu können.
Dieser Grundgedanke hat uns bei der im Folgenden beschrieben Auswahl der Modelle und Prozesse geleitet.

\input{Entwicklungsprozess}

\section{Projektplan für die Bachelor-Arbeit}
Der Zeitplan für die Bachelor-Arbeit ist in Abbildung \ref{img:terminplan} auf Seite \pageref{img:terminplan} dargestellt.
Im oberen Teil sind die allgemeinen Termine und Abwesenheiten aufgeführt. Der mittlere Teil zeigt die Arbeitsverteilung über das Semester und am Schluss kommen die Zeitaufwände für Doku und Meetings. Die Dokumentation wollen wir kontinuierlich erstellen, sodass wöchentlich ein entsprechender Block vorgesehen ist.
% Abbildung (A3)
\newpage
\clearpage
\pagebreak
\afterpage{ % Insert after the current page
\clearpage
\KOMAoptions{paper=a3, paper=landscape} 
\recalctypearea

\begin{figure}[htbp]
	\centering
	\includegraphics[width=1.1\linewidth]{img/terminplan} % ab heigth = 0.6 auf eigener Seite!
	\caption{Terminplan}
	\label{img:terminplan}
\end{figure}
\clearpage
\KOMAoptions{paper=A4,pagesize}
\recalctypearea
}


% Risiko
\section{Risikoanalyse}
\input{Risikoanalyse}   


% Dokumentation
\section{Dokumentation}
\Diskussionspunkt{Versionsverwaltung, Dokumentationskonzept, Tools?, Printscreens}

%Allgemein
Für die Bachelor-Arbeit verwenden wir unterschiedliche Dokumentationswerkzeuge. Bei der Auswahl haben wir darauf geachtet, das die Tools kostenlos nutzbar und für sämtliche Plattformen verfügbar sind (Windows, Mac, iPad, usw.) Weiter war uns wichtig, dass die Tools untereinander kommunizieren können. 

% github / Trello / Toggl
Sämtliche Artefakte speichern wir auf \textit{github}. Wir haben somit eine automatische Versionierung der Dokumente und können unabhängig voneinander an den Dokumenten arbeiten. Die Planung bzw. Darstellung des Entwicklungsprozesses erledigen wir mir \textit{Trello}. Es ist ein intuitives Tool, welche diverse Integrationsmöglichkeiten mit den anderen Tools bietet. Für die Zeiterfassung verwenden wir \textit{Toggl}, welches mittels Plugin direkt in Trello integriert werden kann.

% Kommunikation nach aussen
Damit wir keine Besprechungsprotokolle verschicken müssen und dass alle Informationen für alle immer zugänglich sind, haben wir entschieden das Reporting in Form einer öffentlichen Webseite zu erstellen. github bietet mit \textit{GitPages} einen Hosting-Service an, der genau dies ermöglicht. Der Vorteil von GitPages ist, dass wir sämtliche Daten in einem einzigen Ort bzw. Repository vereint haben. Damit wir uns nicht mit Formatierung u.a. herumschlagen müssen und uns auf den Inhalt konzentrieren können, verwenden wir \textit{mkdocs} als Template Engine. Die Webseiten-Einträge können wir dadurch auf simple Art in Form von Markdown-Files erstellen.

% Kommunikation nach innen
Innerhalb des Teams nutzen wir das Kommunikationstool \textit{Slack}. Dieses ermöglich uns Konversationen als Chat aufzuzeichnen und nach Themen zu gruppieren. Weiter lassen sich Dokumente austauschen. Sämtliche git-Posts werden von Slack automatisch geloggt und können, falls gewünscht, als push-Notification angezeigt werden.
Das wöchentliche Team-Meeting findet über \textit{Skype} statt, da wir den regelmässigen mündlichen Austausch aus zentralen Punkt erachten.

% Bericht = LaTeX
Den Bericht werden wir in LaTeX verfassen. Wir haben uns für LaTeX entschieden, da wir uns auf den Inhalt konzentrieren können und das Layout automatisiert ist. Weiter ist LaTeX in der Wissenschaft weit verbreitet. Die Bachelor-Arbeit ist deshalb eine gute Gelegenheit uns in dieses Thema einzuarbeiten.


\section{Rechtliche Ansprüche}
siehe separates Dokument


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%  Schluss
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Schluss}
\Diskussionspunkt{Erkenntnisse, Einschätzungen}\\
\Diskussionspunkt{Vergleich FM-Planung zu FM-IST}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Verzeichnisse
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliography{literatur}{}	
\bibliographystyle{plain}

\end{document}
