<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>KW17 - Wetter Arbon</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Wetter Arbon</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Meetings <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../idee/">Themenvorschlag BA</a>
</li>
                            
<li >
    <a href="../kickoff/">Kick off Meeting</a>
</li>
                            
<li >
    <a href="../meetings/">Meetings</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reports BA <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../KW08/">KW08</a>
</li>
                            
<li >
    <a href="../KW09/">KW09</a>
</li>
                            
<li >
    <a href="../KW10/">KW10</a>
</li>
                            
<li >
    <a href="../KW11/">KW11</a>
</li>
                            
<li >
    <a href="../KW12/">KW12</a>
</li>
                            
<li >
    <a href="../KW13/">KW13</a>
</li>
                            
<li >
    <a href="../KW14/">KW14</a>
</li>
                            
<li >
    <a href="../KW15/">KW15</a>
</li>
                            
<li >
    <a href="../KW16/">KW16</a>
</li>
                            
<li class="active">
    <a href="./">KW17</a>
</li>
                            
<li >
    <a href="../KW18/">KW18</a>
</li>
                            
<li >
    <a href="../KW19/">KW19</a>
</li>
                            
<li >
    <a href="../KW20/">KW20</a>
</li>
                            
<li >
    <a href="../KW21/">KW21</a>
</li>
                            
<li >
    <a href="../KW22/">KW22</a>
</li>
                            
<li >
    <a href="../KW23/">KW23</a>
</li>
                            
<li >
    <a href="../KW24/">KW24</a>
</li>
                            
<li >
    <a href="../KW25/">KW25</a>
</li>
                            
<li >
    <a href="../KW26/">KW26</a>
</li>
                            
<li >
    <a href="../KW27/">KW27</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reports FM <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../KW44/">KW44</a>
</li>
                            
<li >
    <a href="../KW45/">KW45</a>
</li>
                            
<li >
    <a href="../KW46/">KW46</a>
</li>
                            
<li >
    <a href="../KW47/">KW47</a>
</li>
                            
<li >
    <a href="../KW48/">KW48</a>
</li>
                            
<li >
    <a href="../KW49/">KW49</a>
</li>
                            
<li >
    <a href="../KW50/">KW50</a>
</li>
                            
<li >
    <a href="../KW51/">KW51</a>
</li>
                        </ul>
                    </li>
                    <li >
                        <a href="../about/">About</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../KW16/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../KW18/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#wochenreport-kw-17">Wochenreport KW 17</a></li>
            <li><a href="#ziel-dieser-woche">Ziel dieser Woche</a></li>
            <li><a href="#resultat-erkenntnisse">Resultat / Erkenntnisse</a></li>
            <li><a href="#probleme-herausforderungen">Probleme / Herausforderungen</a></li>
            <li><a href="#journal-zeitaufwand">Journal / Zeitaufwand</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="wochenreport-kw-17">Wochenreport KW 17</h1>
<h2 id="ziel-dieser-woche">Ziel dieser Woche</h2>
<ul>
<li>DB mit historischen Daten/Stundendaten erstellen</li>
<li>Auswahl der Wettervorhersagedienste und Abrufen der Daten</li>
<li>API programmierung output / API Dokumentation</li>
<li>Testen des neuen Pegelsensors</li>
<li>Testen des Pegel-Interfaces</li>
<li>Wassertemperaturdaten einlesen uns speichern</li>
<li>Wetterdaten in neue Datenbank Schreiben</li>
</ul>
<h2 id="resultat-erkenntnisse">Resultat / Erkenntnisse</h2>
<h3 id="db-mit-historischen-datenstundendaten-erstellen">DB mit historischen Daten/Stundendaten erstellen</h3>
<p>Das Problem aus der <a href="https://lb-ntb.github.io/wetterArbon/KW16/">KW16</a> ist gelöst. Es war ein Programmierfehler, welcher behoben werden konnte. Die Daten werden jetzt in die neue Datenbank geschrieben. Da dies grosse Menge an Daten sind dauert dies seine Zeit.</p>
<h3 id="auswahl-der-wettervorhersagedienste">Auswahl der Wettervorhersagedienste</h3>
<p>Für die Windvorhersage haben wir zwei Anbieter ausgewählt:</p>
<ul>
<li>Windfinder</li>
<li>Openweathermap</li>
</ul>
<p>Ziel ist, dass wir die Vorhersagedaten der beiden Anbieter abrufen und bei uns in der Datenbank speichern. Openweathermap bietet eine kostenlose Web-API an, windfinder leider nicht. Wir rufen die Daten über ein Python-Skritp ab. Da Windfinder keine API anbietet, müssen die Daten aus der Webseite extrahiert werden. Ein mögliches Tool dazu ist BeautifulSoup.</p>
<h3 id="api-programmierung-output-api-dokumentation">API programmierung output / API Dokumentation</h3>
<p>Die Dokumentation der API ist <a href="http://api.wetter-arbon.ch/">hier</a> einsehbar. Wir haben uns für Postman entschieden um eine Dokumentation zu erstellen. Dies aufgrund der Einfachheit, es können auch zu einem späteren Zeitpunkt noch Änderungen vorgenommen werden. Die Dokumentationsseite liegt jedoch nicht auf dem Server von Hostpoint selber, diese wird von Postman gehostet.</p>
<h3 id="ausmessen-des-neuen-pegelsensors">Ausmessen des neuen Pegelsensors</h3>
<p>Der neue Pegelsensor ist einsatzbereit. Erste Tests an Land sind erfolgreich verlaufen. Sobald der Strahlungsmesser eingetroffen ist, können beide Sensoren montiert werden.</p>
<h3 id="script-einlesen-des-pegels">Script einlesen des Pegels</h3>
<p>Um die Daten auszulesen wurde ein Pythonskript erstellt. Dieses greift per HTTP GET Anfrage die Werte des Pegelsensors ab. Das Skript für den Pegel kann jedoch erst fertig konfiguriert werden, wenn der neue Pegelsensor montiert ist.</p>
<h3 id="script-einlesen-des-pegels-und-der-wassertemperaturdaten">Script einlesen des Pegels und der Wassertemperaturdaten</h3>
<p>Es wurde ein Skript erstellt, welches per HTTP GET die Wassertemperatur-Werte der PT100 abholt und in die Datenbank speichert. Ziel ist ehrauszufinden, ob der defekte Messwiderstand einen konstanten Offset aufweist.</p>
<h3 id="wetterdaten-in-neue-datenbank-schreiben">Wetterdaten in neue Datenbank Schreiben</h3>
<p>Die Wetterdaten wurden bis letzte Woche in die alte Datenbank geschrieben.Dies wurde am letzen Mittwoch geändert, dass die API auch aktuelle Werte liefern kann und die Datenbankabfrage angepasst werden kann. Leider ist hier ein Problem aufgetauch, welches im Abschnitt Probleme behandelt wird.</p>
<h2 id="probleme-herausforderungen">Probleme / Herausforderungen</h2>
<h3 id="auslesen-der-windvorhersagewerte">Auslesen der Windvorhersagewerte</h3>
<p>Wie oben beschrieben müssen wir die Vorhersagedaten von Windfinder aus der Webseite extrahieren. Lokal funktioniert die Abfrage. Auf dem Hostpoint-Server haben wir aber die Berechtigung nicht um BeautifulSoup zu installieren. Lösungsvorschläge sind erwünscht.</p>
<h3 id="wetterdaten-in-neue-datenbank-schreiben_1">Wetterdaten in neue Datenbank schreiben</h3>
<p>Der Wechsel auf die neue Datenbank hat nicht ganz reibungslos abgelaufen. Die Daten wurden ab Mittwochabend nicht mehr geschrieben. Das Problem konnte jedoch am Donnerstag behoben werden, nach eine Neustart des Servers. Die Software verträgt laut dem Informatiker der IG solche Umstellungen nicht immer, nach einem Neustart sollte jedoch alles wieder funktionieren.</p>
<h3 id="api">API</h3>
<p>Die Dokumentationsseite wird per Weiterleitung aufgerufen. Jedoch ist hier ein Fehler in der Umleitung, sodass auch von der /sensors Seite auf die Dokumentation weitergeleitet wird. Dies sollte nächste Woche aber behoben sein. Weiter besteht noch die Herausforderung die Datenbankabfrage so zu gestalten, dass die aktuellen Daten immer angezeigt werden. Das Problem im Moment an einem Beispiel:<br />
Ist die Zeit bspw. 15:45:15 Uhr, funktioniert die Datenbankabfrage nicht.<br />
Ist es jedoch 15:45:32 Uhr oder später funktioniert die Abfrage.<br />
Die Schwierigkeit liegt bei den Sekunden sodass im Moment die Datenbankabfrage nichti immer greift. Dies
sollte nächste Woche jedoch erledigt sein.</p>
<h2 id="journal-zeitaufwand">Journal / Zeitaufwand</h2>
<p>4h Interface für Pegel und Strahlungsmesser testen<br />
3h Konzept erstellen für Vorhersagedaten<br />
10h Vorhersagedaten einlesen<br />
6.5h DB mit historischen Daten erstellen
7h Skript erstellen für Pegel und Temperaturesensor
5h API Programmierung input / Webseite mit Dokumentation<br />
1h Wochenreport<br />
0.5h Ausmessen neuer Pegelsensor</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
